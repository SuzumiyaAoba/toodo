# Toodo - タスク管理アプリケーション要件仕様書

## 1. 概要

Toodo は個人やチームが Todo アイテムを効率的に管理するための REST API アプリケーションです。

## 2. 機能要件

### 2.1 Todo 管理

#### 2.1.1 基本機能

- Todo アイテムの作成、読み取り、更新、削除（CRUD）
- Todo の状態管理（Pending、In Progress、Completed、Cancelled）
- Todo への説明文の追加
- Todo の優先度設定（Low、Medium、High、Critical）

#### 2.1.2 作業状態追跡

- Todo の作業状態管理（Idle、Active、Paused、Completed）
- 作業時間の記録と集計
- 状態変更履歴の保存

#### 2.1.3 依存関係管理

- Todo アイテム間の依存関係の設定
- 依存関係がある Todo の表示
- 依存する Todo の表示
- 循環依存関係の検出と防止
- 依存関係に基づいたステータス制限（例：依存するTodoが完了するまで完了にできない）

### 2.2 タグ管理

- タグの作成、読み取り、更新、削除
- タグの名前とカラー設定
- Todo へのタグ付け
- タグによる Todo のフィルタリング

### 2.3 プロジェクト管理

- プロジェクトの作成、読み取り、更新、削除
- プロジェクトの名前、説明、カラー設定
- プロジェクトの状態管理（Active、Inactive）
- Todo のプロジェクトへの割り当て
- プロジェクトによる Todo のフィルタリング

## 3. 非機能要件

### 3.1 パフォーマンス

- API レスポンスタイムは平均 200ms 以下を目標とする
- 同時に 50 リクエストを処理できるようにする

### 3.2 セキュリティ

- 入力値のバリデーション
- SQLインジェクション対策
- XSS対策

### 3.3 拡張性

- コードベースは新機能の追加が容易な構造とする
- クリーンアーキテクチャの原則に従う

### 3.4 信頼性

- エラー処理の一貫性
- 適切なロギング
- ユニットテスト、統合テストのカバレッジ 80% 以上

## 4. ユーザーストーリー

### 4.1 Todo 管理

1. ユーザーは新しい Todo を作成できる
2. ユーザーは Todo のリストを表示できる
3. ユーザーは Todo の詳細を表示できる
4. ユーザーは Todo を編集できる
5. ユーザーは Todo を削除できる
6. ユーザーは Todo を完了としてマークできる
7. ユーザーは Todo にステータスを設定できる
8. ユーザーは Todo の作業を開始/一時停止/再開できる
9. ユーザーは Todo 間の依存関係を設定できる
10. ユーザーは Todo の依存関係を表示できる

### 4.2 タグ管理

1. ユーザーは新しいタグを作成できる
2. ユーザーはタグのリストを表示できる
3. ユーザーはタグを編集できる
4. ユーザーはタグを削除できる
5. ユーザーは Todo にタグを付けられる
6. ユーザーはタグで Todo をフィルタリングできる

### 4.3 プロジェクト管理

1. ユーザーは新しいプロジェクトを作成できる
2. ユーザーはプロジェクトのリストを表示できる
3. ユーザーはプロジェクトの詳細を表示できる
4. ユーザーはプロジェクトを編集できる
5. ユーザーはプロジェクトを削除できる
6. ユーザーはプロジェクトに Todo を追加できる
7. ユーザーはプロジェクトで Todo をフィルタリングできる

## 5. 技術スタック

- TypeScript
- Hono (Web フレームワーク)
- Valibot (バリデーション)
- Prisma (ORM)
- SQLite (データベース)
- Bun (ランタイム)
